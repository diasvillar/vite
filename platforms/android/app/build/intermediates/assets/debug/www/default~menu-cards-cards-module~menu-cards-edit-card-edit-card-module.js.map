{"version":3,"sources":["webpack:///./src/app/menu/cards/edit-card/edit-card.module.ts","webpack:///./src/app/menu/cards/edit-card/edit-card.page.html","webpack:///./src/app/menu/cards/edit-card/edit-card.page.scss","webpack:///./src/app/menu/cards/edit-card/edit-card.page.ts","webpack:///./src/domain/cpagamento/cpagamento.ts"],"names":[],"mappings":"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","file":"default~menu-cards-cards-module~menu-cards-edit-card-edit-card-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditCardPage } from './edit-card.page';\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tFormsModule,\n\t\tIonicModule\n\t],\n\tdeclarations: [EditCardPage]\n})\nexport class EditCardPageModule {}\n","module.exports = \"<ion-content padding>\\n\\t<div class=\\\"page-header\\\">Cadastrar novo cartão</div>\\n\\t<ion-list lines=\\\"none\\\">\\n\\t\\t<ion-item no-padding>\\n\\t\\t\\t<ion-input placeholder=\\\"Número do Cartão\\\" [(ngModel)]=\\\"cPagamento.card_number\\\" name=\\\"card_number\\\" maxlength=\\\"16\\\" required></ion-input>\\n\\t\\t</ion-item>\\n\\t\\t<ion-item no-padding>\\n\\t\\t\\t<ion-input placeholder=\\\"Nome do Titular\\\" [(ngModel)]=\\\"cPagamento.holder_name\\\" name=\\\"holder_name\\\" required></ion-input>\\n\\t\\t</ion-item>\\n\\t\\t<!--<ion-item no-padding>\\n\\t\\t\\t<ion-input placeholder=\\\"CPF\\\"></ion-input>\\n\\t\\t</ion-item>-->\\n\\t\\t<ion-item no-padding>\\n\\t\\t\\t<ion-grid>\\n\\t\\t\\t\\t<ion-row>\\n\\t\\t\\t\\t\\t<ion-col size=\\\"7\\\">\\n\\t\\t\\t\\t\\t\\t<ion-datetime placeholder=\\\"Vencimento\\\" displayFormat=\\\"MM/YY\\\" min=\\\"2018\\\" max=\\\"2035-12-31\\\"  [(ngModel)]=\\\"cPagamento.card_expiration\\\" name=\\\"card_expiration\\\" required></ion-datetime>\\n\\t\\t\\t\\t\\t</ion-col>\\n\\t\\t\\t\\t\\t<ion-col size=\\\"5\\\">\\n\\t\\t\\t\\t\\t\\t<ion-input placeholder=\\\"CSV\\\" type=\\\"number\\\" min=\\\"1\\\" max=\\\"9999\\\" [(ngModel)]=\\\"cPagamento.card_cvv\\\"  name=\\\"card_cvv\\\" required></ion-input>\\n\\t\\t\\t\\t\\t</ion-col>\\n\\t\\t\\t\\t</ion-row>\\n\\t\\t\\t</ion-grid>\\n\\t\\t</ion-item>\\n\\t</ion-list>\\n\\t\\n\\t<div class=\\\"footer-buttons\\\" *ngIf=\\\"cPagamento.card_number != null && cPagamento.holder_name != null && cPagamento.card_expiration != null && cPagamento.card_cvv != null\\\">\\n\\t\\t<ion-button (click)=\\\"cadastrarCPagamento()\\\" color=\\\"primary\\\">Cadastrar</ion-button>\\n\\t</div>\\n\\n\\t<div class=\\\"footer-buttons\\\" *ngIf=\\\"cPagamento.card_number == null || cPagamento.holder_name == null || cPagamento.card_expiration == null || cPagamento.card_cvv == null\\\">\\n\\t\\t<ion-button color=\\\"medium\\\">Cadastrar</ion-button> <!--href=\\\"/cards-list\\\"-->\\n\\t</div>\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21lbnUvY2FyZHMvZWRpdC1jYXJkL2VkaXQtY2FyZC5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { Cpagamento } from '../../../../domain/cpagamento/cpagamento';\nimport { Router, NavigationExtras, ActivatedRoute } from \"@angular/router\";\nimport { ModalController, NavController, AlertController } from '@ionic/angular';\nimport { Http } from '@angular/http';\n\n@Component({\n\tselector: 'app-edit-card',\n\ttemplateUrl: './edit-card.page.html',\n\tstyleUrls: ['./edit-card.page.scss'],\n})\nexport class EditCardPage implements OnInit {\n\t\n\t@Input() card: any;\n\tpublic cPagamento : Cpagamento;\n  \tpublic data;\n  \tpublic http;\n\n\tconstructor(\n\t\tprivate modalCtrl: ModalController,\n\t\tprivate route: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tpublic navCtrl: NavController,\n\t\tprivate _alertCtrl: AlertController,\n\t\thttp: Http\n\t) { \n\n\t\tthis.cPagamento = new Cpagamento(null,null,null,null,null,null,null,null);\n\t\tthis.data={};\n\t\tthis.data.response = '';\n\t\tthis.http = http;\n\n\t\tthis.cPagamento.payment_method_code = \"credit_card\";\n\n\t}\n\t\n\tngOnInit() { }\n\n\ttestarCC(card_number) {\n\n\t\tvar cartoes = {\n\t\t   visa: /^4[0-9]{12}(?:[0-9]{3})/,\n\t\t   mastercard: /^5[1-5][0-9]{14}/,\n\t\t   americanExpress: /^3[47][0-9]{13}/,\n\t\t   dinersClub: /^3(?:0[0-5]|[68][0-9])[0-9]{11}/,\n\t\t   elo: /^(401178|401179|431274|438935|451416|457393|457631|457632|504175|627780|636297|636368|(506699|5067[0-6]\\\\d|50677[0-8])|(50900\\\\d|5090[1-9]\\\\d|509[1-9]\\\\d{2})|65003[1-3]|(65003[5-9]|65004\\\\d|65005[0-1])|(65040[5-9]|6504[1-3]\\\\d)|(65048[5-9]|65049\\\\d|6505[0-2]\\\\d|65053[0-8])|(65054[1-9]|6505[5-8]\\\\d|65059[0-8])|(65070\\\\d|65071[0-8])|65072[0-7]|(65090[1-9]|65091\\\\d|650920)|(65165[2-9]|6516[6-7]\\\\d)|(65500\\\\d|65501\\\\d)|(65502[1-9]|6550[3-4]\\\\d|65505[0-8]))[0-9]{10,12}/\n\t\t };\n   \n\t\t for (var cartao in cartoes){\n\t\t   if (card_number.match(cartoes[cartao])) {\n\t\t\t return cartao;\n\t\t   }  \n\t\t }     \n\t\t return false;\n\t }\n\n\t cadastrarCPagamento(){\n\n\t\tvar link = 'https://viniciusvillar.000webhostapp.com/vite/page/cadastrar_c_pagamento';\n\t\tvar data = JSON.stringify(\n\t\t  {\n\t\t\t\tidUser: sessionStorage.getItem('usuarioId'), \n\t\t\t\tpayment_method_code: this.cPagamento.payment_method_code, \n\t\t\t\tpayment_company_code: this.testarCC(this.cPagamento.card_number),\n\t\t\t\tholder_name: this.cPagamento.holder_name,\n\t\t\t\tcard_cvv: this.cPagamento.card_cvv,\n\t\t\t\tcard_expiration: this.cPagamento.card_expiration,\n\t\t\t\tcard_number: this.cPagamento.card_number\n\t\t  });     \n\t\n\t\t  this.http.post(link, data)\n\t\t  .subscribe(data =>{\n\t\t\tthis.data.response = data._body;\n\t\t\t\tif (this.data.response == \"sucesso\"){\n\n\t\t\t\t\tthis.presentAlert();\n\t\t\n\t\t\t\t\tthis.modalCtrl.dismiss(data.status);\n\n\t\t\t\t}\n\t\t  }, error =>{\n\t\t   \n\t\t\t\t\tthis.presentFailAlert();\n\t\t\t\t\tthis.modalCtrl.dismiss();\n   \n\t\t  });\n\t\t}\n  \n\t\tasync presentAlert() {\n\t\t  const alert = await this._alertCtrl.create({\n\t\t\theader: \"Cadastrado com Sucesso!\",\n\t\t\tbuttons: [{text: 'OK'}]\n\t\t  });\n\t  \n\t\t  await alert.present();\n\t\t}\n  \n\t\tasync presentFailAlert() {\n\t\t  const alert = await this._alertCtrl.create({\n\t\t\theader: \"Falha na conexão\",\n\t\t\tmessage: 'Não foi possível cadastrar o usuário. Tente novamente.',\n\t\t\tbuttons: [{ text: \"Estou ciente!\" }]\n\t\t  });\n\t  \n\t\t  await alert.present();\n\t\t\n\t  }\n\n}","export class Cpagamento{\r\n    constructor(\r\n        public id: number,\r\n        public idUser: number,\r\n        public payment_method_code : string,\r\n        public payment_company_code : string,\r\n        public holder_name : string,\r\n        public card_cvv : string,\r\n        public card_expiration : string,\r\n        public card_number : string\r\n        ){}\r\n    }"],"sourceRoot":""}